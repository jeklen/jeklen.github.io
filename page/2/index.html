<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="云，飘逸者也。然，知止后定">
<meta property="og:type" content="website">
<meta property="og:title" content="云止">
<meta property="og:url" content="http://blog.myyoulemei.com/page/2/index.html">
<meta property="og:site_name" content="云止">
<meta property="og:description" content="云，飘逸者也。然，知止后定">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="云止">
<meta name="twitter:description" content="云，飘逸者也。然，知止后定">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://blog.myyoulemei.com/page/2/"/>

  <title> 云止 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">云止</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/Python-Lambda/" itemprop="url">
                  Python: Lambda
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-19T17:06:22+08:00" content="2016-08-19">
              2016-08-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/19/Python-Lambda/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/19/Python-Lambda/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文翻译自<a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk" target="_blank" rel="external">Python:Lambda Function</a></p>
<p><a href="http://love.myyoulemei.com/2016/08/19/Python-Lambda/">本文地址</a></p>
<p>Python可以用“lambda”创建匿名函数。在Python里，lambda和函数型编程语言中并不相同，但是由于它整合进了Python并经常和filter(),map(),reduce()一起使用。</p>
<p>下面的代码展示了一个普通的函数定义(“f”)和一个lambda函数(“g”)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def f(x): return x**2</div><div class="line">...</div><div class="line">&gt;&gt;&gt; print f(8)</div><div class="line">64</div><div class="line">&gt;&gt;&gt; g = lambda x: x**2</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print g(8)</div><div class="line">64</div></pre></td></tr></table></figure></p>
<p>正如你看到的，f()和g()功能相同，使用方式相同。需要注意：lambda定义中并没有包括”return”声明–它总是包括了一个被返回的表达式。另外你可以把lambda放在任何需要函数的地方，你根本不需要把它赋给一个变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def make_incrementor (n): return lambda x: x + n</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; f = make_incrementor(2)</div><div class="line">&gt;&gt;&gt; g = make_incrementor(6)</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print f(42), g(42)</div><div class="line">44 48</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print make_incrementor(22)(33)</div><div class="line">55</div></pre></td></tr></table></figure></p>
<p>上面的代码定义了一个函数”make_incrementor”,这个函数创建并返回了一个匿名的函数。这个返回的函数将它的自变量加上声明的值。</p>
<p>现在你可以创建不同的增加函数并给他们赋上不同的值。正如最后一条表达式，你甚至不需要在任何地方定义一个函数–你可以直接使用，并在不需要它的时候忘了它。</p>
<p>下面的代码更加深入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; foo = [2, 18, 9, 22, 17, 24, 8, 12, 27]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print filter(lambda x: x % 3 == 0, foo)</div><div class="line">[18, 9, 24, 12, 27]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print map(lambda x: x * 2 + 10, foo)</div><div class="line">[14, 46, 28, 54, 44, 58, 26, 34, 64]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print reduce(lambda x, y: x + y, foo)</div><div class="line">139</div></pre></td></tr></table></figure></p>
<p>首先我们定一个了一个整型的数组，然后用标准的函数filter(),map()和reduce()对这个数组做不同的操作。这三个函数都需要两个参数：一个函数和一个数组。</p>
<p>当然，我们可以单独定义一个函数并将这个函数名作为filter()等的一个参数。事实上如果我们需要多次用这个函数或者这个函数用一行来写太复杂了，这样做或许会是一个好方法。然而，如果我们只需要一次这个函数并且这个函数非常简单（比如只包含了一个表达式）。用一个lambda结构去表示一个匿名的函数并把这个函数like传递给filter()简便的多。这可以创造出紧凑但是具有可读性的代码。</p>
<p>在第一个函数里，数组里的每一个元素都执行了lambda函数，返回的是一个只包含原来数组中使函数返回值为真的元素。在这个例子中，我们得到了一个所有的元素都是3的倍数的数组。</p>
<p>在第2个例子中，map()函数被用来转化数组。原来数组中的每一个元素都执行给定的函数，返回值是原来数组钟的元素从lambda函数中返回值所构成的数组。在这个例子中，它将每一个元素都执行了2 * X + 10操作。</p>
<p>最后，reduce()是比较特殊的。”worker function”(作为参数传递的那个匿名函数)必须接受两个参数（在这里是x和y）。这个匿名函数首先调用数组里的前两个元素，然后调用返回值和第三个元素，以此类推，知道数组里的元素全部被调用。这意味着如果数组中有n个元素，这个匿名函数就会调用n-1次，reduce()的结果是最后一次调用匿名函数的返回值。在上面的例子中，它只是简单地将所有元素相加，因此我们得到的是所有元素的和。（需要注意的是，python中内置函数sum()比这种方式效率更高）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; nums = range(2, 50)</div><div class="line">&gt;&gt;&gt; for i in range(2, 8):</div><div class="line">...     nums = filter(lambda x: x == i or x % i, nums)</div><div class="line">...</div><div class="line">&gt;&gt;&gt; print nums</div><div class="line">[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]</div></pre></td></tr></table></figure></p>
<p>这是计算素数的方式之一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; sentence = &apos;It is raining cats and dogs&apos;</div><div class="line">&gt;&gt;&gt; words = sentence.split()</div><div class="line">&gt;&gt;&gt; print words</div><div class="line">[&apos;It&apos;, &apos;is&apos;, &apos;raining&apos;, &apos;cats&apos;, &apos;and&apos;, &apos;dogs&apos;]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; lengths = map(lambda word: len(word), words)</div><div class="line">&gt;&gt;&gt; print lengths</div><div class="line">[2, 2, 7, 4, 3, 4]</div></pre></td></tr></table></figure>
<p>计算句子中每个单词的长度。</p>
<p>上面的代码可以写得更短<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; print map(lambda w: len(w), &apos;It is raining cats and dogs&apos;.split())</div><div class="line">[2, 2, 7, 4, 3, 4]</div></pre></td></tr></table></figure></p>
<p>下面是一个UNIX编程里的例子：我们想要找到文件系统中的挂载点（mount point？）。为了达到目的，我们执行了外界的命令”mount”并解析结果。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import commands</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; mount = commands.getoutput(&apos;mount -v&apos;)</div><div class="line">&gt;&gt;&gt; lines = mount.splitlines()</div><div class="line">&gt;&gt;&gt; points = map(lambda line: line.split()[2], lines)</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print points</div><div class="line">[&apos;/&apos;, &apos;/var&apos;, &apos;/usr&apos;, &apos;/usr/local&apos;, &apos;/tmp&apos;, &apos;/proc&apos;]</div></pre></td></tr></table></figure></p>
<p>commands模块中的getoutput函数(Python标准库的一部分)执行命令并把结果作为一个字符串返回。因此，我们先把它分割成单独的句子。最后我们用带lambda的”map”函数对每一行操作并返回结果中的第三个元素（就是mountpoint）。</p>
<p>同样的，这也可以写成一句。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print map(lambda x:x.split()[2], commands.getoutput(&apos;mount -v&apos;).splitlines())</div></pre></td></tr></table></figure></p>
<p>在实际应用的代码中，推荐分割复杂的表达式，应为这样更容易阅读，同时也便于更改。</p>
<p>然而，把一个命令的输出分割成一个由行组成的数组是非常常见的。每次分析外部的命令是你都需要它。因此，通常将分割操作包括到getgoutput里，但是其他的操作另外做。这是紧凑与可读性的协调。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; lines = commands.getoutput(&apos;mount -v&apos;).splitlines()</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; points = map(lambda line: line.split()[2], lines)</div><div class="line">&gt;&gt;&gt; print points</div><div class="line">[&apos;/&apos;, &apos;/var&apos;, &apos;/usr&apos;, &apos;/usr/local&apos;, &apos;/tmp&apos;, &apos;/proc&apos;]</div></pre></td></tr></table></figure></p>
<p>一个更好的方法是为这个操作写一个小函数，将执行命令和分割输出包装到函数中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 这也是一种方法</div><div class="line">&gt;&gt;&gt; lines = commands.getoutput(&apos;mount -v&apos;).splitlines()</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; points = [line.split()[2] for line in lines]</div><div class="line">&gt;&gt;&gt; print points</div><div class="line">[&apos;/&apos;, &apos;/var&apos;, &apos;/usr&apos;, &apos;/usr/local&apos;, &apos;/tmp&apos;, &apos;/proc&apos;]</div></pre></td></tr></table></figure>
<p>在新版本中，comands.getoutput()函数被subprocess.check_output()代替</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/data-hacking-practice-3/" itemprop="url">
                  data_hacking_practice_3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-19T14:52:52+08:00" content="2016-08-19">
              2016-08-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/19/data-hacking-practice-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/19/data-hacking-practice-3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="这次要分析的代码如下"><a href="#这次要分析的代码如下" class="headerlink" title="这次要分析的代码如下"></a>这次要分析的代码如下</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">for threat in [&apos;APT&apos;, &apos;CRIME&apos;]:</div><div class="line">    subset = conndf[conndf[&apos;threat&apos;] == threat][[&apos;date&apos;,&apos;sample&apos;]]</div><div class="line">    subset[&apos;count&apos;] = 1</div><div class="line">    pivot = pd.pivot_table(subset, values=&apos;count&apos;, rows=[&apos;date&apos;], cols=[&apos;sample&apos;], fill_value=0)</div><div class="line">    by = lambda x: lambda y: getattr(y, x)</div><div class="line">    grouped = pivot.groupby([by(&apos;year&apos;),by(&apos;month&apos;)]).sum()</div><div class="line"></div><div class="line">    ax = grouped.plot()</div><div class="line">    pylab.ylabel(&apos;Connections&apos;)</div><div class="line">    pylab.xlabel(&apos;Date Recorded&apos;)</div><div class="line">    patches, labels = ax.get_legend_handles_labels()</div><div class="line">    ax.legend(loc=&apos;upper center&apos;, bbox_to_anchor=(0.5, -0.15), ncol=2, title=&quot;Sample Name&quot;)</div></pre></td></tr></table></figure>
<p>代码涉及到</p>
<ul>
<li>pandas：groupby, pivot</li>
<li>pylab</li>
<li>lambda</li>
</ul>
<p>由于这些对我来说也全是新内容，所以我还有点一知半解，暂时将我懂得东西记录下来，边做边学。</p>
<h2 id="知识梳理"><a href="#知识梳理" class="headerlink" title="知识梳理"></a>知识梳理</h2><h3 id="pandas：groupby"><a href="#pandas：groupby" class="headerlink" title="pandas：groupby"></a>pandas：groupby</h3><h3 id="pandas：pivot"><a href="#pandas：pivot" class="headerlink" title="pandas：pivot"></a>pandas：pivot</h3><p><img src="data-hacking-practice-3/pivot_table.png" alt=""></p>
<h3 id="pylab入门"><a href="#pylab入门" class="headerlink" title="pylab入门"></a>pylab入门</h3><h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h3><h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for threat in [&apos;APT&apos;, &apos;CRIME&apos;]:</div><div class="line">    subset = conndf[conndf[&apos;threat&apos;] == threat][[&apos;date&apos;,&apos;sample&apos;]]</div><div class="line">    subset[&apos;count&apos;] = 1</div></pre></td></tr></table></figure>
<p>这一部分做的事情是将conndf这个dataFrame中威胁为’APT’和’CRIME’的分别做处理，将其中的date和sample分离出来，得到的subset依次是</p>
<p>图1<br><img src="data-hacking-practice-3/subset1.png" alt=""><br>图2<br><img src="data-hacking-practice-3/subset2.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 原作者代码（pandas老版本）</div><div class="line">pivot = pd.pivot_table(subset, values=&apos;count&apos;, rows=[&apos;date&apos;], cols=[&apos;sample&apos;], fill_value=0)</div><div class="line"># 我的代码（pandas新版本）</div><div class="line">pivot = pd.pivot_table(subset, values=&apos;count&apos;, index=&apos;date&apos;, columns=&apos;sample&apos;, fill_value=0)</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">by = lambda x: lambda y: getattr(y, x)</div></pre></td></tr></table></figure>
<p>下面是stackoverflow上一个人给我的回答，返回的会是一个函数<br>by = lambda x: lambda y: getattr(y, x) is equivalent to the following:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def by(x):</div><div class="line">    def getter(y):</div><div class="line">        return getattr(y, x)</div><div class="line">    return getter</div></pre></td></tr></table></figure></p>
<p>getattr(a, b) gets an attribute with the name b from an object named a.</p>
<p>So by(‘bar’) returns a function that returns the attribute ‘bar’ from an object.</p>
<p>by(‘bar’)(foo) means getattr(foo, ‘bar’) which is roughly foo.bar.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grouped = pivot.groupby([by(&apos;year&apos;),by(&apos;month&apos;)]).sum()</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ax = grouped.plot()</div><div class="line">pylab.ylabel(&apos;Connections&apos;)</div><div class="line">pylab.xlabel(&apos;Date Recorded&apos;)</div><div class="line">patches, labels = ax.get_legend_handles_labels()</div><div class="line">ax.legend(loc=&apos;upper center&apos;, bbox_to_anchor=(0.5, -0.15), ncol=2, title=&quot;Sample Name&quot;)</div></pre></td></tr></table></figure>
<p>下面是对这里的一行代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grouped = pivot.groupby([by(&apos;year&apos;), by(&apos;month&apos;)]).sum</div></pre></td></tr></table></figure></p>
<p>当一个可调用的传递给<code>groupby</code>的时候，作用在<code>DataFrame</code>的index上，所以这个代码is grouping by the year and month of a datetimelike index。<br>下面又是一个例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">In [55]: df = pd.DataFrame(&#123;&apos;a&apos;: 1.0&#125;,</div><div class="line">                           index=pd.date_range(&apos;2014-01-01&apos;, periods=13, freq=&apos;M&apos;))</div><div class="line"></div><div class="line">In [56]: df.groupby([by(&apos;year&apos;), by(&apos;month&apos;)]).sum()</div><div class="line">Out[56]:</div><div class="line">           a</div><div class="line">2014 1   1.0</div><div class="line">     2   1.0</div><div class="line">     3   1.0</div><div class="line">     4   1.0</div><div class="line">     5   1.0</div><div class="line">     6   1.0</div><div class="line">     7   1.0</div><div class="line">     8   1.0</div><div class="line">     9   1.0</div><div class="line">     10  1.0</div><div class="line">     11  1.0</div><div class="line">     12  1.0</div><div class="line">2015 1   1.0</div></pre></td></tr></table></figure></p>
<p>更明确地表示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">In [57]: df.groupby([df.index.year, df.index.month]).sum()</div><div class="line">Out[57]:</div><div class="line">           a</div><div class="line">2014 1   1.0</div><div class="line">     2   1.0</div><div class="line">     3   1.0</div><div class="line">     4   1.0</div><div class="line">     5   1.0</div><div class="line">     6   1.0</div><div class="line">     7   1.0</div><div class="line">     8   1.0</div><div class="line">     9   1.0</div><div class="line">     10  1.0</div><div class="line">     11  1.0</div><div class="line">     12  1.0</div><div class="line">2015 1   1.0</div></pre></td></tr></table></figure></p>
<p>接下来是作图<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ax = grouped.plot()</div><div class="line">pylab.ylabel(&apos;Connections&apos;)</div><div class="line">pylab.xlabel(&apos;Date Recorded&apos;)</div><div class="line">patches, labels = ax.get_legend_handles_labels()</div><div class="line">ax.legend(loc=&apos;upper center&apos;, bbox_to_anchor=(0.5, -0.15), ncol=2, title=&quot;Sample Name&quot;)</div></pre></td></tr></table></figure></p>
<p>这里有一句很有意思<br><code>ax.legend(loc=&#39;upper center&#39;, bbox_to_anchor=(0.5, -0.15), ncol=2, title=&quot;Sample Name&quot;)</code></p>
<p>loc参数是参考位置，bbox_to_anchors是相对坐标轴位置</p>
<h2 id="作图基础-matplotlib"><a href="#作图基础-matplotlib" class="headerlink" title="作图基础(matplotlib)"></a>作图基础(matplotlib)</h2><ul>
<li><p>legend entry</p>
<p>  A legend is made up of one or more legend entries. An entry is made up of exactly one key and one label.</p>
</li>
<li><p>legend key</p>
<p>  The colored/patterned marker to the left of each legend label.</p>
</li>
<li><p>legend label</p>
<p>  The text which describes the handle represented by the key.</p>
</li>
<li><p>legend handle</p>
<p>  The original object which is used to generate an appropriate entry in the legend.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">line_up, = plt.plot([1,2,3], label=&apos;Line 2&apos;)</div><div class="line">line_down, = plt.plot([3,2,1], label=&apos;Line 1&apos;)</div><div class="line">plt.legend(handles=[line_up, line_down])</div></pre></td></tr></table></figure>
<p>在一些情况下，不能为handle设置label，因此将label的数组传递给legend()是可能的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">line_up, = plt.plot([1,2,3], label=&apos;Line 2&apos;)</div><div class="line">line_down, = plt.plot([3,2,1], label=&apos;Line 1&apos;)</div><div class="line">plt.legend([line_up, line_down], [&apos;Line Up&apos;, &apos;Line Down&apos;])</div></pre></td></tr></table></figure></p>
<p>在上面的代码中 ，有<code>line_up,=plt.plot</code>，这其中的逗号（comma）并不是输入错误<br>是因为</p>
<blockquote>
<p>plt.plot returns a list of the Line2D objects plotted, even if you plot only one line. That comma is unpacking the single value into line.</p>
</blockquote>
<p>解决方法有两个</p>
<blockquote>
<p>加逗号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">line, = ax.plot(x, np.sin(x))</div><div class="line"># 加括号也可以</div><div class="line">(line,) = ax.plot(x, np.sin(x))</div></pre></td></tr></table></figure></p>
<p>取数组第一个元素<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">line = ax.plot(x, np.sin(x))[0]</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>ax.get_legend_handles_labels</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 返回一个数组</div><div class="line">handles, labels = ax.get_legend_handles_labels()</div><div class="line">ax.legend(handles, labels)</div></pre></td></tr></table></figure>
<ul>
<li>ax.legend</li>
</ul>
<p>参考：</p>
<p><a href="http://stackoverflow.com/questions/39031255/what-does-by-lambda-x-lambda-y-getattry-x-mean" target="_blank" rel="external">http://stackoverflow.com/questions/39031255/what-does-by-lambda-x-lambda-y-getattry-x-mean</a><br><a href="http://pbpython.com/pandas-pivot-table-explained.html" target="_blank" rel="external">http://pbpython.com/pandas-pivot-table-explained.html</a><br><a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk" target="_blank" rel="external">http://www.secnetix.de/olli/Python/lambda_functions.hawk</a><br><a href="http://stackoverflow.com/questions/39053348/pandas-groupby-with-a-lambda-parameter" target="_blank" rel="external">http://stackoverflow.com/questions/39053348/pandas-groupby-with-a-lambda-parameter</a><br><a href="http://matplotlib.org/users/legend_guide.html" target="_blank" rel="external">http://matplotlib.org/users/legend_guide.html</a><br><a href="http://stackoverflow.com/questions/16037494/python-code-is-it-comma-operator" target="_blank" rel="external">http://stackoverflow.com/questions/16037494/python-code-is-it-comma-operator</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/17/data-hacking-practice-2/" itemprop="url">
                  data_hacking_practice 2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-17T14:34:57+08:00" content="2016-08-17">
              2016-08-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/17/data-hacking-practice-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/17/data-hacking-practice-2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="data-hacking-practice-2"><a href="#data-hacking-practice-2" class="headerlink" title="data_hacking_practice 2"></a>data_hacking_practice 2</h1><h2 id="一些帮助函数"><a href="#一些帮助函数" class="headerlink" title="一些帮助函数"></a>一些帮助函数</h2><h3 id="函数1-将IPv4地址转化为整型"><a href="#函数1-将IPv4地址转化为整型" class="headerlink" title="函数1:将IPv4地址转化为整型"></a>函数1:将IPv4地址转化为整型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def ip2int(addr):</div><div class="line">  try:</div><div class="line">    return struct.unpack(&quot;!I&quot;, socket.inet_aton(addr))[0]</div><div class="line">  except Exception as e:</div><div class="line">    pass</div><div class="line">    #print &quot;Error: %s - %s&quot; % (str(e), addr)</div><div class="line">  return 0</div></pre></td></tr></table></figure>
<p>这个函数名其实也挺有意思，ip To int，将ip地址转化为整型。</p>
<p>python的socket模块里有很多对ip地址进行转换的函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.inet_aton(ip_string)</div></pre></td></tr></table></figure></p>
<p>将带点号的IPv4地址（eg：”123.45.67.89”)转化成32-bit packed binary format<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">struct.unpack(fmt, string)</div></pre></td></tr></table></figure></p>
<p>struct模块可以对python值，C结构体之间执行转化（具体意思没怎么明白），同时它可以对<br>binary data进行操作。</p>
<p>上面的函数的作用：将string转化为fmt格式。上面fmt参数中!表示字节顺序（byte order）是<br>按照network（即小段法big-endian），I表示无符号整型。</p>
<p>返回：一个元组（即使只有一个元素），本例中就只有一个元素。</p>
<h3 id="函数2-得到IP地址对应的地理位置"><a href="#函数2-得到IP地址对应的地理位置" class="headerlink" title="函数2:得到IP地址对应的地理位置"></a>函数2:得到IP地址对应的地理位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">def maxmind_lookup(ip):</div><div class="line">  if ip in maxcache:</div><div class="line">    return maxcache[ip]</div><div class="line">  i = ip2int(ip)</div><div class="line">  if i == 0:</div><div class="line">    return &quot;UNKNOWN&quot;</div><div class="line">  results = list(maxmind.loc[(maxmind[&quot;low&quot;] &lt; i) &amp; (maxmind(&quot;high&quot;) &gt; i)][&apos;asn&apos;])</div><div class="line">  if len(results) &gt; 0:</div><div class="line">    maxcache[ip] = results[0]</div><div class="line">    return results[0]</div><div class="line">  maxcache[ip] = &quot;UNKNOWN&quot;</div><div class="line">  return &quot;UNKNOWN&quot;</div></pre></td></tr></table></figure>
<p>maxmind是一家公司，这家公司提供了一个免费的CSV文件——GeoIPASNum2.csv，里面包含了IP地址<br>对应的地理位置。在这之前，已经用以下代码导入数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">maxmind = pd.read_csv(&quot;./GeoIPASNum2.csv&quot;, sep=&apos;,&apos;, header=None, names=[&apos;low&apos;,&apos;high&apos;,&apos;asn&apos;])</div><div class="line">maxmind[&apos;low&apos;] = maxmind[&apos;low&apos;].astype(int)</div><div class="line">maxmind[&apos;high&apos;] = maxmind[&apos;high&apos;].astype(int)</div></pre></td></tr></table></figure></p>
<p>maxcache是之前定义的一个字典，key是ip，value是地理位置的字符串。</p>
<p>函数2的功能可以说是查找一个ip地址，如果它在maxcache中存在了，就直接返回地理位置<br>如果不存在，则将它加入maxcache，然后返回地理位置，如果找不到位置，就直接返回<br>“UNKNOWN”.</p>
<p>这里的有一行代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">results = list(maxmind.loc[(maxmind[&quot;low&quot;] &lt; i) &amp; (maxmind(&quot;high&quot;) &gt; i)][&apos;asn&apos;])</div></pre></td></tr></table></figure></p>
<p>results中最多只有一个元素，所以下面直接取results[0]作为物理地址的字符串。</p>
<h3 id="函数3："><a href="#函数3：" class="headerlink" title="函数3："></a>函数3：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">def box_plot_df_setup(series_a, series_b):</div><div class="line">    # Count up all the times that a category from series_a</div><div class="line">    # matches up with a category from series_b. This is</div><div class="line">    # basically a gigantic contingency table</div><div class="line">    cont_table = collections.defaultdict(lambda : collections.Counter())</div><div class="line">    for val_a, val_b in zip(series_a.values, series_b.values):</div><div class="line">        cont_table[val_a][val_b] += 1</div><div class="line"></div><div class="line">    # Create a dataframe</div><div class="line">    # A dataframe with keys from series_a as the index, series_b_keys</div><div class="line">    # as the columns and the counts as the values.</div><div class="line">    dataframe = pd.DataFrame(cont_table.values(), index=cont_table.keys())</div><div class="line">    dataframe.fillna(0, inplace=True)</div><div class="line">    return dataframe</div></pre></td></tr></table></figure>
<p>相关知识：pandas，collections，lambda，zip<br>pandas还有点不清楚，看完pandas再更。</p>
<h3 id="函数4：判断是否是ip地址"><a href="#函数4：判断是否是ip地址" class="headerlink" title="函数4：判断是否是ip地址"></a>函数4：判断是否是ip地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def is_ip(ip):</div><div class="line">    try:</div><div class="line">        socket.inet_aton(ip)</div><div class="line">        return True</div><div class="line">    except socket.error:</div><div class="line">        return False</div></pre></td></tr></table></figure>
<p>参考</p>
<p><a href="https://docs.python.org/2/library/struct.html" target="_blank" rel="external">https://docs.python.org/2/library/struct.html</a><br><a href="https://docs.python.org/2/library/socket.html" target="_blank" rel="external">https://docs.python.org/2/library/socket.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/17/python-TCP-programming/" itemprop="url">
                  python TCP programming
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-17T09:47:28+08:00" content="2016-08-17">
              2016-08-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/17/python-TCP-programming/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/17/python-TCP-programming/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="python-TCP-programming"><a href="#python-TCP-programming" class="headerlink" title="python TCP programming"></a>python TCP programming</h1><h2 id="TCP大致结构"><a href="#TCP大致结构" class="headerlink" title="TCP大致结构"></a>TCP大致结构</h2><h2 id="以下是用python3实现的一个TCP服务器和客户端-really-simple"><a href="#以下是用python3实现的一个TCP服务器和客户端-really-simple" class="headerlink" title="以下是用python3实现的一个TCP服务器和客户端(really simple)"></a>以下是用python3实现的一个TCP服务器和客户端(really simple)</h2><h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">from socket import *</div><div class="line">serverName = &quot;localhost&quot;</div><div class="line">serverPort = &quot;12000&quot;</div><div class="line">clientSocket = socket(AF_INET, SOCK_STREAM) # IPV4, TCP socket</div><div class="line"># do not need to specify the port number of the client</div><div class="line">clientSocket.connect(serverName, serverPort)</div><div class="line">sentence = input(&quot;Input lover case sentence&quot;)</div><div class="line">clientSocket.send(sentence.encode(&quot;utf-8&quot;))</div><div class="line">modifiedMessage = clientSocket.recv(1024)</div><div class="line">print(&quot;From server:&quot;, modifiedMessage.decode(&apos;utf-8&apos;))</div></pre></td></tr></table></figure>
<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">from socket import *</div><div class="line">serverPort = &quot;12000&quot;</div><div class="line">serverSocket = socket(AF_INET, SOCK_STREAM)</div><div class="line">serverSocket.bind((&apos;&apos;, serverPort)) # need to specify the port number of the client</div><div class="line"></div><div class="line"># 这一行让服务器等待TCP的连接请求，参数1声明了等待的连接数的最大值（最小是1）</div><div class="line">serverSocket.listen(1)</div><div class="line"></div><div class="line">print(&quot;The server is ready to receive.&quot;)</div><div class="line"></div><div class="line">while 1:</div><div class="line">  connectionSocket, addr = serverSocket.accept()</div><div class="line">  sentence = connectionSocket.recv(1024)</div><div class="line">  capitalizedSentence = sentence.upper()</div><div class="line">  connectionSocket.send(capitalizedSentence)</div><div class="line">  connectionSocket.close()</div></pre></td></tr></table></figure>
<p>另见<a href="http://love.myyoulemei.com/2016/08/14/python-UDP-programming/">python UDP 编程</a></p>
<p>参考</p>
<p>Computer Networking: A Top Down Approach</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/17/PCAP文件数据使用Python导入/" itemprop="url">
                  PCAP文件数据使用Python导入
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-17T07:06:06+08:00" content="2016-08-17">
              2016-08-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/17/PCAP文件数据使用Python导入/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/17/PCAP文件数据使用Python导入/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="PCAP文件使用Python导入"><a href="#PCAP文件使用Python导入" class="headerlink" title="PCAP文件使用Python导入"></a>PCAP文件使用Python导入</h1><p>首先开始学习的是<a href="http://clicksecurity.github.io/data_hacking/" target="_blank" rel="external">data_hacking</a>这个项目里的<a href="https://github.com/ClickSecurity/data_hacking/tree/master/contagio_traffic_analysis" target="_blank" rel="external">PCAP Exploration (BSidesATX 2014)</a></p>
<p>这个项目做的事情主要是根据Bro获取到的PCAP文件进行一些分析工作。</p>
<h2 id="PCAP文件"><a href="#PCAP文件" class="headerlink" title="PCAP文件"></a>PCAP文件</h2><p>PCAP文件是wireshark，Bro等网络嗅探工具针对网络接口、端口和协议的数据包截取的一种保存形式。</p>
<h2 id="python遍历目录树"><a href="#python遍历目录树" class="headerlink" title="python遍历目录树"></a>python遍历目录树</h2><p>使用os.walk函数<br>使用语法格式如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.walk(top, topdown=True, onerror=None, followlinks=False)</div></pre></td></tr></table></figure></p>
<p>函数的返回值是一个含有三个元素的元组：(dirpath, dirnames, filenames)<br>eg1:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 得到目录下非目录的文件（除CSV文件外所占的字节数）</div><div class="line">import os</div><div class="line">from os.path import getsize, join</div><div class="line">for root, dirs, files in os.walk(&quot;.&quot;)</div><div class="line">  print root, &quot;consumes&quot;,</div><div class="line">  # join(root, name)获得完整路径</div><div class="line">  print sum(getsize(join(root, name))) for name in files,</div><div class="line">  print &quot;bytes in&quot; len(files), &quot;non-directory files&quot;</div><div class="line">  if &apos;CSV&apos; in dirs:</div><div class="line">    dirs.remove(&apos;CSV&apos;)</div></pre></td></tr></table></figure></p>
<p>eg2:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 删除一个文件夹下所有文件</div><div class="line"># 使用topdown=False让目录遍历从底部开始是因为os.rmdir只能删除空文件夹</div><div class="line">for root, dirs, files in os.walk(&quot;.&quot;, topdown=False)</div><div class="line">  for name in files:</div><div class="line">    os.remove(os.path.join(root, name))</div><div class="line">  for name in dirs:</div><div class="line">    os.rmdir(os.path.join(root, name))</div></pre></td></tr></table></figure></p>
<h2 id="项目分析"><a href="#项目分析" class="headerlink" title="项目分析"></a>项目分析</h2><p>参考</p>
<p><a href="https://github.com/ClickSecurity/data_hacking/tree/master/contagio_traffic_analysis" target="_blank" rel="external">https://github.com/ClickSecurity/data_hacking/tree/master/contagio_traffic_analysis</a><br><a href="https://github.com/ClickSecurity/data_hacking/tree/master/contagio_traffic_analysis" target="_blank" rel="external">https://github.com/ClickSecurity/data_hacking/tree/master/contagio_traffic_analysis</a><br><a href="https://docs.python.org/2/library/os.html" target="_blank" rel="external">https://docs.python.org/2/library/os.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/17/我的新项目data-hacking-practice/" itemprop="url">
                  我的新项目data_hacking_practice
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-17T06:58:41+08:00" content="2016-08-17">
              2016-08-17
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/17/我的新项目data-hacking-practice/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/17/我的新项目data-hacking-practice/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="我的新项目data-hacking-practice"><a href="#我的新项目data-hacking-practice" class="headerlink" title="我的新项目data_hacking_practice"></a>我的新项目data_hacking_practice</h1><p>最近准备学习github上面的一个叫做<a href="http://clicksecurity.github.io/data_hacking/" target="_blank" rel="external">data_hacking</a>的项目，这个项目是用IPython，Pandas，Scikit来进行安全方面的数据挖掘。</p>
<p>接下来呢我就会开始将我对这个项目的操作和分析记录在博客上。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/16/windows下利用Anaconda搭建python2和python3共存/" itemprop="url">
                  windows下利用Anaconda搭建python2和python3共存
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-16T16:22:07+08:00" content="2016-08-16">
              2016-08-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/16/windows下利用Anaconda搭建python2和python3共存/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/16/windows下利用Anaconda搭建python2和python3共存/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="windows下利用Anaconda搭建python2和python3共存"><a href="#windows下利用Anaconda搭建python2和python3共存" class="headerlink" title="windows下利用Anaconda搭建python2和python3共存"></a>windows下利用Anaconda搭建python2和python3共存</h1><p>windows下不同的python版本共存一直是一个纠结人的问题。python有些库的安装有比较麻烦，整天折腾工具是一件很浪费时间的事。</p>
<p>而Anaconda整合了很多python的库。在Anaconda里，python和其他的库一样，只是一个插件。搭建不同版本的python就比较简单。</p>
<h2 id="官方不同python版本环境的搭建"><a href="#官方不同python版本环境的搭建" class="headerlink" title="官方不同python版本环境的搭建"></a>官方不同python版本环境的搭建</h2><h3 id="查看已安装版本"><a href="#查看已安装版本" class="headerlink" title="查看已安装版本"></a>查看已安装版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">conda info envs</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python --version #正在使用的版本</div></pre></td></tr></table></figure>
<h3 id="安装不同的版本"><a href="#安装不同的版本" class="headerlink" title="安装不同的版本"></a>安装不同的版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">conda create --name snakes python=3 #安装python</div></pre></td></tr></table></figure>
<p>这时会发现在Anaconda的安装路径的envs路径下会多出来一个snakes文件夹。</p>
<h3 id="使用另一版本的python"><a href="#使用另一版本的python" class="headerlink" title="使用另一版本的python"></a>使用另一版本的python</h3><p>linux：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source activate snakes</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">windows：activate snakes</div></pre></td></tr></table></figure>
<h3 id="回到默认版本的python"><a href="#回到默认版本的python" class="headerlink" title="回到默认版本的python"></a>回到默认版本的python</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deactivate</div></pre></td></tr></table></figure>
<h2 id="很便捷的不同python版本环境的搭建"><a href="#很便捷的不同python版本环境的搭建" class="headerlink" title="很便捷的不同python版本环境的搭建"></a>很便捷的不同python版本环境的搭建</h2><p><em>上面虽然可以创建不同版本的python环境，但安装新包网速着实慢。。。</em></p>
<p>首先根据使用最多的python版本，安装对应的Anaconda安装包，然后再把另一个python版本的Anaconda安装到第一个Anaconda安装路径下的envs文件夹即可，详见参考网址。<br>在envs下的安装目录名就是之后使用它的名字。<br>eg：<br>我的安装路径是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Anaconda3\envs\py2</div></pre></td></tr></table></figure></p>
<p>使用方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">source activate py2</div><div class="line">deactivate</div></pre></td></tr></table></figure></p>
<p>如果某些包Anaconda没有收录，可转换到对应的python版本后，直接pip install sth，安装后的就是对应版本的python的包。</p>
<p>参考<br><a href="http://conda.pydata.org/docs/py2or3.html" target="_blank" rel="external">http://conda.pydata.org/docs/py2or3.html</a><br><a href="http://blog.csdn.net/infin1te/article/details/50445217" target="_blank" rel="external">http://blog.csdn.net/infin1te/article/details/50445217</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/阅读小记及《影响力》/" itemprop="url">
                  阅读小记及《影响力》
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-14T20:20:56+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/14/阅读小记及《影响力》/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/14/阅读小记及《影响力》/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="阅读小记及《影响力》一书"><a href="#阅读小记及《影响力》一书" class="headerlink" title="阅读小记及《影响力》一书"></a>阅读小记及《影响力》一书</h1><p><em>打小爱书，封面精美纸质有质感者尤甚</em></p>
<p>后来书堆积得越来越多，也不得不说是一个浪费。索性就不买书了。但是我反倒更珍惜阅读的机会，常常有去图书馆借书。</p>
<p>这个暑假也的确是读了挺多书的。就总结一下最近读的《影响力》这本书吧。这是在豆瓣评价挺高的一本书。里面有很多例子，可以让人思考很多。</p>
<h2 id="书的框架"><a href="#书的框架" class="headerlink" title="书的框架"></a>书的框架</h2><p>其实里面包括的内容有很多，我只是简短地举一些例子，抛砖引玉。</p>
<ul>
<li>互惠</li>
</ul>
<p>投桃报李，中国人对此再清楚不过了。但有时候别人会利用我们的这种心理。</p>
<ul>
<li>承诺和一致</li>
</ul>
<p>为什么有人减肥要向全世界宣布呢？因为他在作出承诺，这会让他有用心去完成的压力。但是我同样听说有的时候我们在宣布的同时心里会有满足，似乎在心理上完成了这件事，得到了满足，于是就不太可能在现实中完成这件事了。所以，可能，在纸上写下来，对自己做承诺或许会更好。</p>
<ul>
<li>社会认同</li>
</ul>
<p>作者用社会认同原理解释了为什么紧急情况下周围人多反而会比人少更难得到帮助。大家都在观望。</p>
<ul>
<li>喜好</li>
</ul>
<p>我们常常会更喜欢和自己相似的人。</p>
<ul>
<li>权威</li>
</ul>
<p>其中有一个在权威要求下电极实验者的实验让人记忆深刻。</p>
<ul>
<li>短缺</li>
</ul>
<p>越容易得到的东西，我们越不懂得珍惜。</p>
<p>就到这里吧，多阅读，人生就会多一些不同的感悟。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/python-UDP-programming/" itemprop="url">
                  python-UDP-programming
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-14T15:05:03+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/14/python-UDP-programming/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/14/python-UDP-programming/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="UDP编程"><a href="#UDP编程" class="headerlink" title="UDP编程"></a>UDP编程</h1><h2 id="以下是用python3实现的一个UDP服务器和客户端"><a href="#以下是用python3实现的一个UDP服务器和客户端" class="headerlink" title="以下是用python3实现的一个UDP服务器和客户端"></a>以下是用python3实现的一个UDP服务器和客户端</h2><h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">from socket import *</div><div class="line"></div><div class="line">serverName = &apos;localhost&apos;    # 在本地测试</div><div class="line">serverPort = 12000</div><div class="line">clientSocket = socket(AF_INET, SOCK_DGRAM)</div><div class="line">message = input(&apos;Input lowercase sentence:&apos;)</div><div class="line">clientSocket.sendto(message.encode(&apos;utf-8&apos;), (serverName, serverPort))    # 见问题2</div><div class="line">modifiedMessage, serverAddress = clientSocket.recvfrom(2048)</div><div class="line">print(modifiedMessage.decode(&apos;utf-8&apos;))</div><div class="line">clientSocket.close()</div></pre></td></tr></table></figure>
<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">from socket import *</div><div class="line"></div><div class="line">serverPort = 12000</div><div class="line">serverSocket = socket(AF_INET, SOCK_DGRAM)</div><div class="line">serverSocket.bind((&apos;&apos;, serverPort))</div><div class="line">print(&quot;The server is ready to receive&quot;)</div><div class="line"></div><div class="line">while 1:</div><div class="line">    message, clientAddress = serverSocket.recvfrom(2048)</div><div class="line">    modifiedMessage = message.upper()</div><div class="line">    serverSocket.sendto(modifiedMessage, clientAddress)</div></pre></td></tr></table></figure>
<p>socket</p>
<h3 id="遇到的问题总结"><a href="#遇到的问题总结" class="headerlink" title="遇到的问题总结"></a>遇到的问题总结</h3><ul>
<li>从python2转到python3，发现raw_input已经在python3中取消了，转为用input代替。</li>
</ul>
<p>在python2中，有input和raw_input函数<br>在python3中，raw_input被重命名为input，如果想要使用原来input的功能，需要使用eval(input())</p>
<ul>
<li>sendto在python2和python3中有不同</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clientSocket.sendto(message.encode(&apos;utf-8&apos;), (serverName, serverPort))</div></pre></td></tr></table></figure>
<p>为什么上面的message需要编码？<br>如果写成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clientSocket.sendto(message, (serverName, serverPort))</div></pre></td></tr></table></figure></p>
<p>会出现以下报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TypeError: a bytes-like object is required, not &apos;str&apos;</div></pre></td></tr></table></figure></p>
<p>在python2里这是对的，但是在python3里改为接受byte类型，但是为什么编码为’utf-8’就可以了，还不清楚。</p>
<ul>
<li>python socket中AF_INET等的解释</li>
</ul>
<p>首先说明一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">AF_* =&gt; Address Family</div><div class="line">PF_* =&gt; Protocol Family</div></pre></td></tr></table></figure></p>
<p>另外在linux内核中：/include/linux/socket.h中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">......... some uninteresting details</div><div class="line">#define PF_LOCAL        AF_LOCAL</div><div class="line">#define PF_INET            AF_INET</div><div class="line">#define PF_AX25           AF_AX25</div><div class="line">..................</div></pre></td></tr></table></figure></p>
<p>原来AF<em>*和PF</em><em>是相区分的，但现在BSD的man page上说：The protocol family generally is the same as the address family. 所以现在标准上到处都是AF_</em><br>总的来说：对于TCP和UDP，用AF_INET就好。</p>
<p>参考：<br><a href="http://stackoverflow.com/questions/13274553/python-3-3-socket-typeerror" target="_blank" rel="external">http://stackoverflow.com/questions/13274553/python-3-3-socket-typeerror</a><br><a href="https://www.quora.com/Whats-the-difference-between-the-AF_PACKET-and-AF_INET-in-python-socket" target="_blank" rel="external">https://www.quora.com/Whats-the-difference-between-the-AF_PACKET-and-AF_INET-in-python-socket</a><br><a href="http://www.tutorialspoint.com/python3/python_networking.htm" target="_blank" rel="external">http://www.tutorialspoint.com/python3/python_networking.htm</a><br><a href="https://docs.python.org/3/library/socket.html#socket.AF_INET" target="_blank" rel="external">https://docs.python.org/3/library/socket.html#socket.AF_INET</a><br>Computer Networking: A Top Down Approach</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/prp-first-thinking/" itemprop="url">
                  试着显示图片
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-09T17:12:46+08:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/09/prp-first-thinking/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/09/prp-first-thinking/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先试试显示图片<br>注意的东西：windows下目录用的是\, 但是这里目录就要用/了。<br><img src="prp-first-thinking/ok.JPG" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/zhang.png"
               alt="Zhang Qiaolun" />
          <p class="site-author-name" itemprop="name">Zhang Qiaolun</p>
          <p class="site-description motion-element" itemprop="description">云，飘逸者也。然，知止后定</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Qiaolun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"qlzhang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
